---
description: Index of shared types, validators, and constants exported from packages/shared
globs: packages/shared/src/**
alwaysApply: false
---

# Shared Contracts Index

All exports from `packages/shared/src/index.ts`. Import as `@odyssey/shared`.

## Type Modules (`src/types/`)

| File | Key Exports |
|------|-------------|
| `auth.ts` | `AuthUser`, `RegisterRequest`, `LoginRequest` |
| `classroom.ts` | `Classroom`, `ClassroomMembership`, `ClassroomStudentSummary`, `ClassroomStudentEconomy` |
| `player.ts` | `PlayerProfile` |
| `task.ts` | `TaskDefinition`, `TaskAnswer`, `TaskResult` |
| `messages.ts` | `ClientMessage`, `ServerMessage` enums, `AttackTargetPayload`, `ObjectDamagedPayload`, `ObjectDestroyedPayload`, `MovePayload`, `SetMapPayload` |
| `interaction.ts` | `TileCoordinate` |
| `inventory.ts` | `ItemInstance` (instanceId, definitionId, definitionVersion, quantity, containedItems?) |
| `itemDefinition.ts` | `ItemDefinition`, `ItemRarity`, `ITEM_RARITIES`, `ComponentDescriptor`, `EquippableParams` |
| `equipmentSlot.ts` | `EquipmentSlot` (`"hand" \| "head"`), `EQUIPMENT_SLOTS` |
| `currency.ts` | `CurrencyType` (`"coins" \| "museum_points"`), `CurrencyReward` |
| `itemAction.ts` | `ItemAction` (`"drop" \| "equip" \| ...`), `ItemActionRequest` |
| `container.ts` | `ContainerKind`, `ContainerDefinition`, `LootEntry`, `OpenContainerPayload`, `ClaimContainerPayload` |
| `lootTable.ts` | `LootQuantity`, `LootSource`, `WeightedSource`, `LootTier`, `LootDrop`, `LootTableDefinition`, `ResolvedLoot` |
| `resource.ts` | `PlayerResourceState` |
| `npc.ts` | `NpcDefinition`, `DialogueLine` |
| `map.ts` | `TiledMapData`, `MapNpcPlacement`, `MapObjectPlacement` |
| `invite.ts` | `InviteInfo`, `ClassroomInviteSummary`, `CreateInviteRequest`, `AcceptInviteRequest` |

New type modules follow the convention: one file per domain, re-exported from `index.ts`.

## Zod Validators (`src/validators/`)

One `*.schema.ts` per type module. Notable schemas:
- `itemDefinition.schema.ts` — `itemDefinitionSchema`, `itemRaritySchema`, `componentDescriptorSchema`
- `equipmentSlot.schema.ts` — `equipmentSlotSchema`
- `currency.schema.ts` — `currencyTypeSchema`, `currencyRewardSchema`
- `container.schema.ts` — `containerDefinitionSchema`, `openContainerPayloadSchema`, `claimContainerPayloadSchema`
- `lootTable.schema.ts` — `lootDropSchema`, `lootTableDefinitionSchema`, `lootTierSchema`, `weightedSourceSchema`
- `itemAction.schema.ts` — `itemActionSchema`, `equipItemPayloadSchema`, `unequipItemPayloadSchema`, `dropItemPayloadSchema`
- `messages.schema.ts` — `objectDamagedPayloadSchema`, `objectDestroyedPayloadSchema`
- `invite.schema.ts` — `createInviteRequestSchema`, `acceptInviteRequestSchema`, `inviteInfoSchema`

New validators are added alongside their type module and re-exported from `index.ts`.

## Constants

- `constants/game.ts` — `TILE_SIZE`, `PLAYER_MOVE_SPEED`, `ROOM_TICK_RATE_MS`
- `constants/equipmentAnchors.ts` — `EQUIPMENT_ANCHORS`, `FacingDirection`, `AnchorConfig` (per-slot per-direction sprite offsets)

## Utilities (`src/utils/rng.ts`)

Seeded RNG for deterministic randomness.

## Stable Contracts (do not break)

- `TaskDefinition` and `TaskResult` shapes
- `NpcDefinition` and `DialogueLine` shapes
- `TiledMapData` and layer schemas
- `ClientMessage` / `ServerMessage` enums (additive only)
- `ItemDefinition` / `ItemInstance` shapes
- `ContainerDefinition` shape
- `LootTableDefinition` shape
- Task validator function signature

New types and validators may be added freely; existing contract shapes listed above must remain backward-compatible.
